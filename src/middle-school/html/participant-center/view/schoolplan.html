<div cg-busy="dashboardPromises">
  <div ng-if="participantRegistration.companyInformation.isCompanyCoordinator == 'true'" ng-cloak>
    <section class="ym-pc-dashboard-coordinator-school-challenge-section" aria-label="School Challenge Selection">
      <div class="d-md-flex justify-content-between flex-wrap gap-4">
        <div class="col">
          <div class="ym-pc-dashboard-coordinator-progress-section__column event-secondary-medium p-3 mb-4">
            <div class="ym-pc-dashboard-coordinator-progress-box">
              <h2 class="h5"> School Plan </h2>
              <em ng-if="!lockEnabled" class="alert alert-light d-block p-0 py-2 me-2">School Planning fields will be locked between 11 pm â€“ 6 am CST for point calculations. If any of the information below is not editable and needs to be updated, please contact your staff partner. </em>
              <em ng-if="lockEnabled" class="alert alert-light d-block p-0 py-2 me-2">{{lockEnabledMsg}}</em>
              <div class="ym-pc-dashboard-section-plan" ng-if="schoolPlan != null && schoolPlan != ''" ng-cloak>
                <div class="schoolPlanDates text-center">
                  <p> Your event is kicking off on <strong>
                      {{schoolPlan.EventStartDate | date:'MM/dd/yyyy'}}
                    </strong>
                    <span ng-if="(schoolPlan.EventStartDate | date:'MM/dd/yyyy') !== (schoolPlan.EventEndDate | date:'MM/dd/yyyy') && schoolPlan.EventEndDate != ''" ng-cloak> and will conclude on <strong>
                        {{schoolPlan.EventEndDate | date:'MM/dd/yyyy'}}
                      </strong>
                    </span>. <span ng-if="schoolPlan.DonationDueDate != '0000-00-00'" ng-cloak> All donations are due on <strong>
                        {{schoolPlan.DonationDueDate | date:'MM/dd/yyyy'}}
                      </strong>. </span>
                  </p>
                </div>
                <div class="ym-pc-dashboard-event-dates mb-2">
                  <div class="pe-2 pb-2 w-100">
                    <div class="form-group d-flex justify-content-between flex-wrap gap-4">
                      <label for="EventStartDate" class="w-50">
                        <strong> Event Start/Distribute Envelopes Date </strong>
                      </label>
                      <div class="input-group-old">
                        <span ng-if="schoolPlan.EventStartDate == '0000-00-00'" ng-cloak>--/--/----</span>
                        <span ng-if="schoolPlan.EventStartDate != '0000-00-00' && lockEnabled" ng-cloak>{{schoolPlan.EventStartDate | date:'MM/dd/yyyy'}}</span>
                        <input ng-if="!lockEnabled" type="date" class="form-control w-auto" id="EventStartDate" ng-model="schoolPlan.EventStartDate" aria-label="Event Start/Distribute Envelopes Date" ng-blur="putSchoolPlan($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="pe-2 pb-2 w-100">
                    <div class="form-group d-flex justify-content-between flex-wrap gap-4">
                      <label for="EventEndDate">
                        <strong> Event End Date </strong>
                      </label>
                      <div class="input-group-old">
                        <span ng-if="schoolPlan.EventEndDate == '0000-00-00'" ng-cloak>--/--/----</span>
                        <span ng-if="schoolPlan.EventEndDate != '0000-00-00' && lockEnabled" ng-cloak>{{schoolPlan.EventEndDate | date:'MM/dd/yyyy'}}</span>
                        <input ng-if="!lockEnabled" type="date" class="form-control w-auto" id="EventEndDate" ng-model="schoolPlan.EventEndDate" aria-label="Event End Date" ng-blur="putSchoolPlan($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="pe-2 pb-2 w-100">
                    <div class="form-group d-flex justify-content-between flex-wrap gap-4">
                      <label for="KickOffDate">
                        <strong> Kick Off/Assembly Date </strong>
                      </label>
                      <div class="input-group-old">
                        <span ng-if="schoolPlan.KickOffDate == '0000-00-00'" ng-cloak>--/--/----</span>
                        <span ng-if="schoolPlan.KickOffDate != '0000-00-00' && lockEnabled" ng-cloak>{{schoolPlan.KickOffDate | date:'MM/dd/yyyy'}}</span>
                        <input ng-if="!lockEnabled" type="date" class="form-control w-auto" id="KickOffDate" ng-model="schoolPlan.KickOffDate" aria-label="Kick Off/Assembly Date" ng-blur="putSchoolPlan($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="pe-2 pb-2 w-100">
                    <div class="form-group d-flex justify-content-between flex-wrap gap-4">
                      <label for="DonationDueDate">
                        <strong> Donation Due Date </strong>
                      </label>
                      <div class="input-group-old">
                        <span ng-if="schoolPlan.DonationDueDate == '0000-00-00'" ng-cloak>--/--/----</span>
                        <span ng-if="schoolPlan.DonationDueDate != '0000-00-00' && lockEnabled" ng-cloak>{{schoolPlan.DonationDueDate | date:'MM/dd/yyyy'}}</span>
                        <input ng-if="!lockEnabled" type="date" class="form-control w-auto" id="DonationDueDate" ng-model="schoolPlan.DonationDueDate" aria-label="Donation Due Date" ng-blur="putSchoolPlan($event)" />
                      </div>
                    </div>
                  </div>
                  <div class="pe-2 pb-2 w-100">
                    <div class="form-group d-flex justify-content-between flex-wrap gap-4">
                      <label for="LastDayOfSchool">
                        <strong> Last Day of School </strong>
                      </label>
                      <div class="input-group-old">
                        <span ng-if="schoolPlan.LastDayOfSchool == '0000-00-00'" ng-cloak>--/--/----</span>
                        <span ng-if="schoolPlan.LastDayOfSchool != '0000-00-00' && lockEnabled" ng-cloak>{{schoolPlan.LastDayOfSchool | date:'MM/dd/yyyy'}}</span>
                        <input ng-if="!lockEnabled" type="date" class="form-control w-auto" id="LastDayOfSchool" ng-model="schoolPlan.LastDayOfSchool" aria-label="Last Day of School" ng-blur="putSchoolPlan($event)" />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="ym-pc-dashboard-school-goals" ng-cloak>
                  <div class="form-group mb-2 pe-2 d-flex justify-content-between flex-wrap gap-4">
                    <label for="StudentRecruitmentGoal"> Student Participant Goal: </label>
                    <span ng-if="lockEnabled" ng-cloak>{{schoolPlan.StudentRecruitmentGoal}}</span>
                    <input ng-if="!lockEnabled" type="number" class="form-control text-end" id="StudentRecruitmentGoal" ng-model="schoolPlan.StudentRecruitmentGoal" aria-label="Student Participant Goal" ng-blur="putSchoolPlan($event)" ng-change="putSchoolPlan($event)">
                  </div>
                  <div class="form-group mb-2 pe-2 d-flex justify-content-between flex-wrap gap-4">
                    <label for="FinnsMissionCompletedGoal"> Finn's Mission Completion Goal: </label>
                    <span ng-if="lockEnabled" ng-cloak>{{schoolPlan.FinnsMissionCompletedGoal}}</span>
                    <input ng-if="!lockEnabled" type="number" class="form-control text-end" id="FinnsMissionCompletedGoal" ng-model="schoolPlan.FinnsMissionCompletedGoal" aria-label="Finn's Mission Completion Goal" ng-blur="putSchoolPlan($event)" ng-change="putSchoolPlan($event)">
                  </div>
                  <div class="form-group d-none">
                    <label for="school_goal"> Fundraising Goal: </label>
                    <span ng-if="lockEnabled" ng-cloak>{{schoolPlan.goalFormatted}}</span>
                    <input ng-if="!lockEnabled" type="text" class="form-control" id="school_goal" ng-model="companyProgress.goalFormatted" aria-label="School Fundraising Goal" ng-blur="putSchoolPlan($event)" onkeypress="return event.charCode == 36 || event.charCode == 44 || event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)">
                  </div>
                </div>
                <div class="ym-pc-dashboard-send-emails checkbox mb-2 pe-2" custom-checkbox ng-class="{'checked': schoolPlan.SendEmailOnBehalfOfCoordinator == 'ALLOW'}" ng-cloak>
                  <label for="SendEmailOnBehalfOfCoordinator">
                    <input ng-disabled="lockEnabled" type="checkbox" name="SendEmailOnBehalfOfCoordinator" id="SendEmailOnBehalfOfCoordinator" ng-model="schoolPlan.SendEmailOnBehalfOfCoordinator" ng-true-value="'ALLOW'" ng-false-value="'DONOTALLOW'" ng-click="putSchoolPlan($event)"> Allow AHA to Send Emails to my students on my behalf </label>
                </div>
                <div class="ym-pc-dashboard-participate-next-year mb-2">
                  <div class="d-md-flex participatingNextYear text-start justify-content-between pe-2">
                    <div class="col-md-8 pl-0 pe-2"> My school will be participating in American Heart Challenge next year! </div>
                    <div class="col-md-3 pr-0">
                      <select ng-disabled="lockEnabled" class="form-control" id="ParticipatingNextYear" ng-model="schoolPlan.ParticipatingNextYear" aria-label="Participating Next Year" ng-change="putSchoolPlan($event,'ParticipatingNextYear')">
                        <option value="YES"> Yes </option>
                        <option value="NO"> No </option>
                        <option value="I'M NOT SURE"> Still Considering </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="ym-pc-dashboard-materials-needed mt-sm d-none">
                  <div class="d-md-flex materialsNeeded text-left">
                    <div class="col-md-8  pe-2"> My school would like materials in the form of: <button aria-label="Click the icon to see an example of the materials." data-balloon-pos="up" data-balloon-length="large" ng-click="showMaterialTypes()">
                        <i class="fa fa-info-circle"></i>
                      </button>
                    </div>
                    <div class="col-md-4">
                      <select ng-disabled="lockEnabled" class="form-control" id="MaterialsNeeded" ng-model="schoolPlan.MaterialsNeeded" aria-label="Materials Needed" ng-change="putSchoolPlan($event,'MaterialsNeeded')">
                        <option value="Envelopes"> Envelopes </option>
                        <option value="Parent Letter"> Parent Letter </option>
                        <option value="Digital Only"> Digital Only </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="ym-pc-dashboard-total-points text-center">
                  <div>
                    <strong> Total Points: <span ng-bind-html="schoolPlan.TotalPointsEarned"></span>
                    </strong>
                  </div>
                  <p> Points updated nightly at 6 a.m. CST <br />
                    <button ng-click="showSchoolPlan()" class="btn btn-md-wide btn-primary ym-progress-show-plan" aria-label="Click here for more information">
                      <strong> Click here for more information </strong>
                    </button>
                  </p>
                </div>
                <div class="ym-pc-dashboard-multi-coord checkbox mt-3" custom-checkbox ng-class="{'checked': schoolPlan.MultipleCoordinators == 'YES'}" ng-cloak>
                  <label for="MultipleCoordinators">
                    <input ng-disabled="lockEnabled" type="checkbox" name="MultipleCoordinators" id="MultipleCoordinators" ng-model="schoolPlan.MultipleCoordinators" ng-true-value="'YES'" ng-false-value="'NO'" ng-click="putSchoolPlan($event)"> My school has two or more coordinators responsible for the American Heart Challenge program. </label>
                </div>
              </div>
            </div>
            <div class="ym-pc-dashboard-section-plan text-center" ng-if="schoolPlan == null || schoolPlan == ''" ng-cloak>
              <p> No plan data available for this School. </p>
            </div>
          </div>
          <div class="ym-pc-dashboard-coordinator-progress-section__column  event-secondary-medium p-3">
            <div class="ym-pc-dashboard-box-header">
              <h2 class="h5 text-start"> School Challenge </h2>
            </div>
            <div class="schoolChallenge d-flex justify-content-between flex-wrap gap-4 text-center">
              <div class="col-md-6">
                <div class="text-start" ng-if="companyProgress.schoolChallenge != ''"> I am challenging my students to </div>
                <div class="text-start" ng-if="companyProgress.schoolChallenge == ''"> Choose a challenge for your students </div>
              </div>
              <div class="col-md-5">
                <select class="form-control" id="challenge" ng-model="companyProgress.schoolChallenge" aria-label="School Challenge" ng-change="updateSchoolChallenge()">
                  <option value="Ice Bucket/Water Challenge"> Ice Bucket/Water Challenge </option>
                  <option value="Dance Party"> Dance Party </option>
                  <option value="Color Blast"> Color Blast </option>
                  <option value="Slime Challenge"> Slime Challenge </option>
                  <option value="Pie in the Face"> Pie Toss </option>
                  <option value="Activity, Party or Event"> Activity, Party or Event </option>
                  <option value="Other"> Other </option>
                  <option value="No School Challenge"> No School Challenge </option>
                </select>
                <div uib-alert class="alert-danger" ng-if="schoolChallengeInfo.errorMessage">
                  <div ng-bind-html="schoolChallengeInfo.errorMessage"></div>
                </div>
                <div class="form-group" ng-if="companyProgress.schoolChallenge == 'Other'" ng-cloak>
                  <label for="schoolChallengeOther" class="sr-only"> Other Challenge: </label>
                  <input ng-keypress="omit_special_char($event)" placeholder="Specify Other Challenge" type="text" id="schoolChallengeOther" class="form-control" ng-model="companyProgress.schoolChallengeOther" aria-label="Other School Challenge" ng-blur="updateSchoolChallenge()">
                </div>
              </div>
              <div class="col-md-6">
                <div class="text-start" ng-if="companyProgress.schoolChallengeLevel != ''"> Student level to achieve </div>
                <div class="text-start" ng-if="companyProgress.schoolChallengeLevel == ''"> Choose a student level to achieve </div>
              </div>
              <div class="col-md-5">
                <select class="form-control" id="challengeLevel" ng-model="companyProgress.schoolChallengeLevel" aria-label="School Challenge Level" ng-change="updateSchoolChallengeLevel()">
                  <option value="$100"> $100 </option>
                  <option value="$150"> $150 </option>
                  <option value="$200"> $200 </option>
                  <option value="$250"> $250 </option>
                  <option value="$300"> $300 </option>
                  <option value="$350"> $350 </option>
                  <option value="Complete Finns Mission"> Complete Finn's Mission </option>
                </select>
                <div uib-alert class="alert-danger" ng-if="schoolChallengeLevelInfo.errorMessage">
                  <div ng-bind-html="schoolChallengeLevelInfo.errorMessage"></div>
                </div>
              </div>
            </div>
            <div class="btn-challenge-report text-center">
              <button type="button" class="btn btn-md-wide btn-primary" ng-class="{'disabled': companyProgress.schoolChallengeLevel == ''}" ng-click="showSchoolChallengeReport()" ng-disabled="companyProgress.schoolChallengeLevel == ''" ng-if="companyParticipants.participants.length > 0" ng-cloak>
                <strong> Generate School Challenge Report </strong>
              </button>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="ym-pc-dashboard-progress-section__column event-secondary-medium p-3 mb-4">
            <div class="ym-pc-dashboard-progress-box">
              <h2 class="h5"> School Page </h2>
              <p> Edit your pages to encourage students and parents to join and donate! </p>
              <div class="text-center mb-5">
                <a class="btn btn-md-wide btn-primary" ng-href="TR?fr_id={{frId}}&amp;pg=company&amp;company_id={{participantRegistration.companyInformation.companyId}}">
                  <strong> View and Edit School Page </strong>
                </a>
              </div>
              <div class="ym-activity-url">
                <p class="small">
                  <span ng-bind-html="companyPageUrl"></span>
                  <button type="button" class="btn btn-primary ms-2 fw-bold" aria-label="Edit School Page URL" ng-click="editCompanyUrl()">
                    Edit School URL
                  </button>
                </p>
              </div>
            </div>
          </div>
          <div class="ym-pc-dashboard-progress-section__column ym-pc-school-plan-texcher-list event-secondary-medium p-3 mb-4">
            <div class="ym-pc-dashboard-progress-box">
              <div id="nclvs_classroom_competition">Loading Teacher List... <img style="max-width: 75px" ng-src="../{{dev_branch != '' ? dev_branch + '/' : ''}}ym-luminate/dist/middle-school/image/loading.gif"></div>
            </div>
          </div>
          <div class="ym-pc-dashboard-progress-section__column ym-pc-school-plan-classroom-challenge event-secondary-medium p-3 mb-4" ng-if="classroomChallenge" ng-cloak>
            <div class="ym-pc-dashboard-progress-box">
              <div id="nclvs_classroom_challenge">Loading Classroom Challenge... <img style="max-width: 75px" ng-src="../{{dev_branch != '' ? dev_branch + '/' : ''}}ym-luminate/dist/middle-school/image/loading.gif"></div>
            </div>
          </div>
          <div class="ym-pc-dashboard-progress-section__column event-secondary-medium p-3 mb-4">
            <div class="ym-pc-dashboard-progress-box">
              <h2 class="h5"> District Dashboard </h2>
              <p> Access district leaderboards and top school reports. </p>
            </div>
            <a href="https://districtdashboard.heart.org" target="_blank" class="btn btn-primary" aria-label="Dashboard report">
              <strong> Dashboard Report&nbsp;&nbsp;<span class="fa fa-external-link" aria-hidden="true"></span></strong>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
